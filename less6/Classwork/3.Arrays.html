<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Classwork</title>

    <script>

    /*
      Задание:
      1. При помощи методов изложеных ниже, переформатировать ITEA_COURSES в массив который содержит длину строк каждого из элементов.
      2. Отфильтровать массив ITEA_COURSES по алфавиту.
          + Бонусный бал. Вывести на страничку списком
      3. Реализация функции поиска по массиву ITEA_COURSES.
          + Бонусный бал. Вывести на страничку инпут и кнопку по которой будет срабатывать поиск.
    */

    // const ITEA_COURSES = ["Курс HTML & CSS", "JavaScript базовый курс", "JavaScript продвинутый курс", "JavaScript Professional", "Angular 2.4 (базовый)", "Angular 2.4 (продвинутый)", "React.js", "React Native", "Node.js", "Vue.js"];

    /*
      Задание 2:
      Написать фильтр массива по:
      Актеру, продолжительности

      Бонус:
        Сделать графическую оболочку для программы:
        - Селект со списком актеров
        - Селект или инпут с продолжительностью
        - Результат в виде списка фильмов
    */

      // var stars = ['Elijah Wood', 'Ian McKellen', 'Orlando Bloom','Ewan McGregor',' Liam Neeson', 'Natalie Portman', 'Ewan McGregor', 'Billy Bob Thornton', 'Martin Freeman']
      // var movies = [
      //       {
      //         name: "Lord of the Rigs",
      //         duration: 240,
      //         starring: [ 'Elijah Wood', 'Ian McKellen', 'Orlando Bloom']
      //       },
      //       {
      //         name: "Star Wars: Episode I - The Phantom Menace",
      //         duration: 136,
      //         starring: [ 'Ewan McGregor',' Liam Neeson', 'Natalie Portman']
      //       },
      //       {
      //         name: "Fargo",
      //         duration: 100,
      //         starring: [ 'Ewan McGregor', 'Billy Bob Thornton', 'Martin Freeman']
      //       },
      //       {
      //       name: "V for Vendetta",
      //       duration: 150,
      //       starring: [ 'Hugo Weaving', 'Natalie Portman', 'Rupert Graves']
      //     }
      //   ];

    </script>
    <style>
      .box {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 1400px;

      }
      .box-search {
        display: flex;
      }
      #listMovies {
        margin-right: 20px;
      }
      #searchMovies {
        cursor: pointer;
        margin-left: 20px;
      }
    </style>
</head>
<body>
  <div class="box">
    <h2>Search task 1</h2>
    <div>
      <input id="input" type="text">
      <button id="search" type="button">Search</button>
      <p id="resultSearch"></p>
    </div>
    <h1>Filters movies task 2</h1>
    <div class="box-search">
      <div>
        <span>Choose actor:</span>
        <select id="listMovies"> </select>
      </div>
      <input id="timeMovies" type="number" placeholder="Time movies">
    </div>
    <div class="result">
      <ul id="resultList"></ul>
    </div>
  </div>
  <script>
  //  // task 1
  //   const ITEA_COURSES = ["Курс HTML & CSS", "JavaScript базовый курс", "JavaScript продвинутый курс", "JavaScript Professional", "Angular 2.4 (базовый)", "Angular 2.4 (продвинутый)", "React.js", "React Native", "Node.js", "Vue.js"];
  //   const input = document.getElementById('input');
  //   const search = document.getElementById('search');
  //   // let lengthArrey = [];

  //   // ITEA_COURSES.forEach(item => lengthArrey.push(item.length));
  //   // console.log(lengthArrey);

  //   // ITEA_COURSES.sort();
  //   // console.log(ITEA_COURSES);
    
  //   const searchItem = () => {
  //     const course = ITEA_COURSES.find(item => item === input.value);
  //     document.getElementById('resultSearch').innerText = course ? input.value : 'Sorry, not found!';
  //   }
      
  //   search.addEventListener('click', searchItem);

    // task2 

    const listMovies = document.getElementById('listMovies');
    const timeMovies = document.getElementById('timeMovies');
    const resultList = document.getElementById('resultList');

    const stars = ['Elijah Wood', 'Ian McKellen', 'Orlando Bloom','Ewan McGregor',' Liam Neeson', 'Natalie Portman', 'Ewan McGregor', 'Billy Bob Thornton', 'Martin Freeman'];
    const movies = [
      {
        name: "Lord of the Rigs",
        duration: 240,
        starring: [ 'Elijah Wood', 'Ian McKellen', 'Orlando Bloom']
      },
      {
        name: "Star Wars: Episode I - The Phantom Menace",
        duration: 136,
        starring: [ 'Ewan McGregor','Liam Neeson', 'Natalie Portman']
      },
      {
        name: "Fargo",
        duration: 100,
        starring: [ 'Ewan McGregor', 'Billy Bob Thornton', 'Martin Freeman']
      },
      {
      name: "V for Vendetta",
      duration: 150,
      starring: [ 'Hugo Weaving', 'Natalie Portman', 'Rupert Graves']
      }
    ];

    const addListMovies = () => {
      stars.forEach(actor => {
        const newOption = document.createElement('option');
        newOption.innerText = actor;
        listMovies.appendChild(newOption);
      })
    }

    window.addEventListener('load', addListMovies);

    const search = () => {
      let moviesHtml = ``;
      for (let index = 0; index < movies.length; index++) {
        const listActor = movies[index].starring;
        const durationMovies = movies[index].duration;
        if (durationMovies <= timeMovies.value || timeMovies.value === '') {
          listActor.forEach(actor => {
            if (actor === listMovies.value) {
              moviesHtml += `
                <li>
                  <h3>Name movie: ${movies[index].name}</h3>
                  <p>Duration: ${movies[index].duration}</p>
                  <p>Starring: ${movies[index].starring.join(', ')}</p>
                </li>
              `;
            }
          })
        }
      }
      resultList.innerHTML = moviesHtml;
    }

    timeMovies.addEventListener('blur', search);
    listMovies.addEventListener('change', search);

  </script>
</body>
</html>


